function import$(t,e){var n={}.hasOwnProperty;for(var r in e)n.call(e,r)&&(t[r]=e[r]);return t}var hub,dragger;hub={list:[],add:function(t){return this.init(),this.list.push(t)},host:function(t){return this.list.filter(function(e){return e.root.contains(t)})[0]},init:function(){var t=this;if(!this.inited)return this.inited=!0,hub.ghost=new Image,hub.ghost.src="data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="15" viewBox="0 0 20 15">\n<rect x="0" y="0" width="20" height="15" fill="rgba(0,0,0,.5)"/>\n</svg>'),document.addEventListener("mousedown",function(t){var e;for(e=t.target;e&&!e.hasAttribute&&e.hasAttribute("draggable");)e=e.parentNode;if(e)return e.setAttribute("draggable",!0)}),document.addEventListener("dragstart",function(t){return t.target,t.dataTransfer.setData("application/json",JSON.stringify({})),t.dataTransfer.setDragImage(hub.ghost,10,10),hub.dragging=!0,t.stopPropagation()}),document.addEventListener("dragover",function(e){var n,r;if(n=ldCaret.byPtr({node:document.body,x:e.clientX,y:e.clientY}),r=t.host(n.range.startContainer))return r.render(n.range),e.preventDefault()}),document.addEventListener("drop",function(e){var n,r,i;if(n=e.target,(r=e.dataTransfer.getData("application/json"))&&JSON.parse(r),i=t.host(n))return i.render(),hub.dragging=!1,e.preventDefault()})}},(dragger=function(t){var e;return null==t&&(t={}),this.opt=t,e=t.root,this.root=e="string"==typeof e?document.querySelector(e):e||null,import$(this,{dragging:!1,caret:null,src:null}),this.caret={box:null,range:null},this.evtHandler={},this.init(),this}).prototype=import$(Object.create(Object.prototype),{init:function(){return this.caret.box=document.createElement("div"),import$(this.caret.box.style,{position:"fixed",left:0,top:0,display:"none",border:"2px solid #f0f",pointerEvents:"none",transition:"opacity .15s ease-in-out",animation:"blink .4s linear infinite"}),document.body.appendChild(this.caret.box),hub.add(this)},render:function(t){var e,n;return t?(n=t.getBoundingClientRect(),import$(this.caret.box.style,{left:n.x+"px",top:n.y+"px",height:n.height+"px",width:"2px",position:"absolute",border:"2px solid #f00",display:"block"})):(e=this.caret.box.style,e.display="none",e)}});