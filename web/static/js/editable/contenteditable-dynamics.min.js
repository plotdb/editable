var contenteditableDynamics,cd,setEditable;contenteditableDynamics=cd={events:{}},cd.events.mousedown=function(t){return cd.drag=!1},cd.events.mousemove=function(t){if(1===t.buttons)return cd.drag=!0},cd.events.click=function(t){return setEditable.call(this,{target:t.target,x:t.clientX,y:t.clientY})},cd.setEditable=setEditable=function(t){var e,n,i,a,c,d,r,l,s,o;return e=t.target,n=t.x,i=t.y,a=cd.ct,cd.ct=Date.now(),c=null!=a?cd.ct-a:1e3,d=ld$.parent(e,"[editable]"),ld$.parent(d,null,this.root)||(d=null),this.activeLock&&this.active!==d&&(d=null),this.active&&this.active!==d&&this.active.setAttribute("contenteditable",!1),!this.active&&d&&this.fire("focus",{node:d}),this.active=d,d?(d.setAttribute("contenteditable",!0),(c<=250||cd.drag)&&(r=window.getSelection()).rangeCount&&(l=r.getRangeAt(0),!r.isCollapsed&&l.toString().length&&ld$.parent(l.commonAncestorContainer,null,this.active)&&(s=l)),s||(ld$.find(d,"[editable]").map(function(t){return t.setAttribute("contenteditable",!1)}),s=ldCaret.byPtr({node:d,x:n,y:i}).range),(o=s.endContainer)&&o.hasAttribute&&o.hasAttribute("editable")&&s.setEndBefore(o),ldCaret.set(s)):this.fire("blur")};