function import$(t,r){var e={}.hasOwnProperty;for(var n in r)e.call(r,n)&&(t[n]=r[n]);return t}!function(){var t,r,e;t={events:{mousedown:function(t){var r;if(this.mod.dragger.contains(t.target)){for(r=t.target;r&&(!r.hasAttribute||!r.hasAttribute("draggable"));)r=r.parentNode;return r?r.setAttribute("draggable",!0):void 0}},dragstart:function(r){var e;return e=this.mod.dragger,r.target,r.dataTransfer.setData("application/json",JSON.stringify({})),r.dataTransfer.setDragImage(t.ghost,10,10),e.setDrag(!0),r.stopPropagation()},dragover:function(t){var r,e;if(t.preventDefault(),r=this.mod.dragger,e=ldCaret.byPtr({node:document.body,x:t.clientX,y:t.clientY}),r.contains(e.range.startContainer))return r.render(e.range)},drop:function(t){var r,e,n,a;if(r=[t.target,this.mod.dragger],e=r[0],n=r[1],t.preventDefault(),n.render(),n.setDrag(!1),n.contains(e))return(a=t.dataTransfer.getData("application/json"))?JSON.parse(a):void 0}},ghost:(r=new Image,r.src="data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="15" viewBox="0 0 20 15">\n<rect x="0" y="0" width="20" height="15" fill="rgba(0,0,0,.5)"/>\n</svg>'),r),init:function(){return this.mod.dragger=new e({root:this.root})}},e=function(t){var r;return null==t&&(t={}),this.opt=t,r=t.root,this.root=r="string"==typeof r?document.querySelector(r):r||null,import$(this,{dragging:!1,caret:null,src:null}),this.caret={box:null,range:null},this.evtHandler={},this.init(),this},e.prototype=import$(Object.create(Object.prototype),{init:function(){return this.caret.box=document.createElement("div"),this.caret.box.classList.add("mod-dragger-caret"),document.body.appendChild(this.caret.box)},contains:function(t){return this.root.contains(t)},setDrag:function(t){return this.dragging=t},render:function(t){var r,e;return t?(e=t.getBoundingClientRect(),import$(this.caret.box.style,{left:e.x+"px",top:e.y+"px",height:e.height+"px",display:"block"})):(r=this.caret.box.style,r.display="none",r)}}),((r=window.editable).mod||(r.mod={})).register("dragger",t)}();